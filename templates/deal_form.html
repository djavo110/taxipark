{% load static %}
<!DOCTYPE html>
<html lang="uz">
  <head>
    <meta charset="UTF-8" />
    <title>Shartnoma Tuzish</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-image: url("https://www.shutterstock.com/shutterstock/photos/763643587/display_1500/stock-vector-woman-with-taxi-driver-putting-luggage-in-the-car-on-taxi-stop-763643587.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        font-family: Arial, sans-serif;
        color: #fff;
      }

      .navbar {
        background: rgba(0, 0, 0, 0.7);
      }

      .navbar-brand {
        color: #ffd700 !important;
        font-weight: bold;
        font-size: 24px;
      }

      .form-container {
        background: rgba(0, 0, 0, 0.65);
        padding: 30px;
        border-radius: 10px;
        margin-top: 60px;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }

      h1 {
        text-align: center;
        margin-bottom: 30px;
        color: #ffd700;
      }

      .form-label {
        color: #fff;
        font-weight: bold;
      }

      .btn-yellow {
        background-color: #ffd700;
        color: #000;
        font-weight: bold;
        border: none;
      }

      .btn-yellow:hover {
        background-color: #e6c200;
      }

      .action-buttons {
        margin-top: 40px;
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      .action-buttons form {
        flex: 1 1 45%;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">🚕 TaxiPark</a>
      </div>
    </nav>

    <div class="form-container">
      <h1>📝 Shartnoma Tuzish</h1>

      <!-- Shartnoma formasi -->
      <form method="post">
        {% csrf_token %}
        <div class="mb-3">
          <label class="form-label">👤 Mijoz (Customer):</label>
          {{ form.customer }}
        </div>

        <div class="mb-3">
          <label class="form-label">🚗 Mashina (Car):</label>
          {{ form.car }}
        </div>

        <div class="mb-3">
          <label class="form-label">📦 Holat (Status):</label>
          {{ form.status }}
        </div>
                <div class="mb-3">
          <label class="form-label">👤 Boshlash Vaqt (Start_date):</label>
          {{ form.start_date }}
        </div>

        <div class="mb-3">
          <label class="form-label">🚗 Tugash Vaqt (end_date):</label>
          {{ form.end_date }}
        </div>

        <div class="mb-3">
          <label class="form-label">📦 Narxi  (total_price):</label>
          {{ form.total_price }}
        </div>

        <div class="text-center mt-4">
          <button type="submit" class="btn btn-yellow btn-lg">
            💾 Saqlash
          </button>
        </div>
      </form>
    </div>

    <div class="action-buttons mt-2">
      {% for deal in deals %} {% if deal.status == 'active' %}
      <form method="post" action="{% url 'mark_arrived' deal.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-success w-100">
          📍 Yetib bordim
        </button>
      </form>
      {% elif deal.status == 'arrived' %}
      <form method="post" action="{% url 'pay_for_ride' deal.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-warning w-100">
          💳 To‘lovni amalga oshirish
        </button>
      </form>
      {% endif %}
      <p>{{ deal.customer }} — {{ deal.car }} — {{ deal.status }}</p>
      {% empty %}
      <p>Hozircha shartnoma yo‘q</p>
      {% endfor %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
